{% extends 'new_main.html' %}

{% block content %}
    <h2>Your Cart</h2>
    <table>
      <tr>
        <th>Item</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total</th>
        <th>Actions</th>
      </tr>
      {% for item in cart_items %}
      <tr>
        <td>{{ item.item.meal }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.item.price }}</td>
        <td>{{ item.get_total_price }}</td>
        <td>
          <form action="{% url 'update_cart_item' item.item.id %}" method="post">
            {% csrf_token %}
            <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
            <button type="submit">Update</button>
          </form>
          <a href="{% url 'remove_from_cart' item.item.id %}">Remove</a>
        </td>
      </tr>
      {% endfor %}
    </table>
    <h3>Total Price: {{ total_price }}</h3>
{% endblock %}