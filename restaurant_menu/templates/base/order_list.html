{% extends 'new_main.html' %}
{% block content %}

    <form method="get" action="{% url 'order_view' %}">
        <label for="status">Filter by Status:</label>
        <select name="status" id="status">
            <option value="">All</option>
            {% for status in status_choices %}
                <option value="{{ status.0 }}" {% if request.GET.status == status.0 %}selected{% endif %}>
                    {{ status.1 }}
                </option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
    </form>

    <table>
        <tr>
            <th>ID</th>
            <th>User</th>
            <th>Total Price</th>
            <th>Status</th>
            <th>Estimated Delivery</th>
        </tr>
        {% for order in orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.user.username }}</td>
                <td>{{ order.total_price }}</td>
                <td>{{ order.get_status_display }}</td>
                <td>{{ order.estimated_delivery }}</td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
